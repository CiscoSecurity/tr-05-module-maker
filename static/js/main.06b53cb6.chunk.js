(this["webpackJsonptr-05-module-maker-react"]=this["webpackJsonptr-05-module-maker-react"]||[]).push([[0],{105:function(e,t,a){},14:function(e,t,a){e.exports=a.p+"static/media/sprite.31710dea.svg"},206:function(e,t,a){},207:function(e,t,a){},208:function(e,t,a){},209:function(e,t,a){},210:function(e,t,a){},211:function(e,t,a){},212:function(e,t,a){},213:function(e,t,a){},214:function(e,t,a){},215:function(e,t,a){},216:function(e,t,a){},217:function(e,t,a){},218:function(e,t,a){},220:function(e,t,a){},224:function(e,t,a){},232:function(e,t,a){},233:function(e,t,a){},234:function(e,t,a){},251:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(34),o=a.n(c),i=(a(98),a(99),a(8)),l=a(9),s=a(11),u=a(10),p=a(4),d=(a(105),a(20)),m=a.n(d),h=a(85),f=a.n(h),E=(a(206),function(e){return{type:"UPDATE_SINGLE_INPUT",payload:{name:e.name,value:e.value}}}),b=function(e){return{type:"LOAD_FILE",payload:e}},y=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={value:"",tab:"write",name:e.props.name},e.handleValueChange=function(t){e.setState({value:t}),e.props.updateSingleInput({name:e.state.name,value:t})},e.handleTabChange=function(t){e.setState({tab:t})},e}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement(m.a,{minEditorHeight:323,minPreviewHeight:323,maxEditorHeight:646,commands:[{commands:[d.commands.headerCommand,d.commands.boldCommand,d.commands.italicCommand,d.commands.strikeThroughCommand,d.commands.linkCommand,d.commands.quoteCommand,d.commands.codeCommand,d.commands.orderedListCommand,d.commands.unorderedListCommand,d.commands.checkedListCommand]}],onChange:this.handleValueChange,onTabChange:this.handleTabChange,value:this.props.syncContent["".concat(this.props.name)],generateMarkdownPreview:function(e){return Promise.resolve(r.a.createElement(f.a,{source:e}))},selectedTab:this.state.tab})}}]),a}(r.a.Component),v={updateSingleInput:E},_=Object(p.b)((function(e){return{syncContent:e.other_inputs}}),v)(y),O=(a(207),"https://visibility.eu.amp.cisco.com"),g="https://visibility.amp.cisco.com",j="https://visibility.apjc.amp.cisco.com",C={"https://visibility.eu.amp.cisco.com":"eu","https://visibility.amp.cisco.com":"nam","https://visibility.apjc.amp.cisco.com":"apjc"},A=["title","default_name","short_description","description","tips","external_references","configuration_spec","capabilities","properties","flags","logo"],P=["basic-auth-password","basic-auth-user","token","url","user"],N=["api_key","boolean","device","integer","options","password","string"],k=["Sign Up","Free Trial","Contact Us"],S=["authorization-header","basic","bearer","configuration-token"],T=["RS256","HS256"],D="Failure: an error occurred",w={nam:[{id:"",name:"",patch:""}],eu:[{id:"",name:"",patch:""}],apjc:[{id:"",name:"",patch:""}]},x=a(14),I=a.n(x),L=a(252),R=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).trimInputValue=function(t){e.props.updateExternalReference(e.props.reference.id,{name:t.target.name,value:t.target.value.trim()})},e.changeInputHandler=function(t){t.persist(),e.props.updateExternalReference(e.props.reference.id,{name:t.target.name,value:t.target.value})},e.onDeleteIconClick=function(){e.props.deleteExternalReference(e.props.reference.id)},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"reference_wrapper"},r.a.createElement("input",{type:"text",name:"label",placeholder:"Enter label",className:"custom_input",autoComplete:"off",list:"ext-ref",value:this.props.reference.label,onChange:this.changeInputHandler,onBlur:this.trimInputValue,required:!0}),r.a.createElement("input",{type:"text",name:"link",placeholder:"Enter link",className:"custom_input",autoComplete:"off",value:this.props.reference.link,onChange:this.changeInputHandler,onBlur:this.trimInputValue,required:!0}),r.a.createElement("datalist",{id:"ext-ref"},k.map((function(t){return r.a.createElement("option",{key:"".concat(t," ").concat(e.props.reference.id)},t)}))),r.a.createElement("svg",{className:"closeIcon",onClick:this.onDeleteIconClick},r.a.createElement("use",{xlinkHref:"".concat(I.a,"#icon-small-x-close")})))}}]),a}(r.a.Component),F={deleteExternalReference:function(e){return{type:"DELETE_EXTERNAL_REFERENCE",payload:e}},updateExternalReference:function(e,t){return{type:"UPDATE_EXTERNAL_REFERENCE",payload:{id:e,pair:t}}}},H=Object(p.b)(null,F)(R),U=(a(208),function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).onAddButtonClick=function(){e.props.addExternalReference()},e}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"reference-section"},r.a.createElement("div",null,r.a.createElement("label",{className:"input-label"}," ","External References"),r.a.createElement("button",{onClick:this.onAddButtonClick,type:"button"},"+ Add")),this.props.syncExternalReferences.map((function(e){return r.a.createElement(H,{reference:e,key:e.id})})))}}]),a}(r.a.Component)),B={addExternalReference:function(){return{type:"ADD_EXTERNAL_REFERENCE",payload:{id:Object(L.a)()}}}},M=Object(p.b)((function(e){return{syncExternalReferences:e.external_references}}),B)(U),q=(a(209),function(e){return{type:"UPDATE_CONF_TOKEN",payload:e}}),V=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={title:e.props.api.title,class:e.props.api.class},e.onCheckboxToggle=function(t){e.props.updateSupportedAPI(e.state.title),t.target.checked?e.props.addCapability(e.state.class):1===e.props.syncSupportedAPIs.filter((function(t){return t.startsWith(e.state.class)})).length&&e.props.deleteCapability(e.state.class)},e}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"supportedAPI"},r.a.createElement("input",{type:"checkbox",autoComplete:"off",onChange:this.onCheckboxToggle,checked:this.props.syncSupportedAPIs.includes(this.state.title)}),r.a.createElement("label",null,this.state.title))}}]),a}(r.a.Component),Y={addCapability:function(e){return{type:"ADD_CAPABILITY",payload:{id:e}}},deleteCapability:function(e){return{type:"DELETE_CAPABILITY",payload:e}},updateSupportedAPI:function(e){return{type:"UPDATE_SUPPORTED_API",payload:e}}},W=Object(p.b)((function(e){return{syncSupportedAPIs:e.properties["supported-apis"]||[]}}),Y)(V),J=(a(210),function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).changeInputHandler=function(t){t.persist(),e.props.updateConfToken({name:t.target.name,value:t.target.value})},e}return Object(l.a)(a,[{key:"render",value:function(){return"RS256"===this.props.alg?r.a.createElement("div",{className:"conf-token-input"},r.a.createElement("label",null,"custom_jwks_host"),r.a.createElement("input",{value:this.props.syncProperties.custom_jwks_host||"",name:"custom_jwks_host",onChange:this.changeInputHandler})):r.a.createElement("div",{className:"conf-token-input"},r.a.createElement("label",null,"configuration-token-key"),r.a.createElement("input",{value:this.props.syncProperties["configuration-token-key"]||"",name:"configuration-token-key",onChange:this.changeInputHandler}))}}]),a}(r.a.Component)),G={updateConfToken:q},X=Object(p.b)((function(e){return{syncProperties:e.properties}}),G)(J),z=(a(211),function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).changeInputHandler=function(t){t.persist(),e.props.updateConfToken({name:t.target.name,value:t.target.value})},e.onSelectUpdate=function(t){e.changeInputHandler(t),e.props.toggleAlgorithm(t.target.value)},e}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"conf-token-input"},r.a.createElement("label",null,"configuration-token-alg"),r.a.createElement("select",{value:this.props.syncProperties["configuration-token-alg"]||"",name:"configuration-token-alg",onChange:this.onSelectUpdate},r.a.createElement("option",{value:"",disabled:!0,hidden:!0},"Select your option"),T.map((function(e){return r.a.createElement("option",{value:e,key:e},e)})))),this.props.syncProperties["configuration-token-alg"]?r.a.createElement(X,{alg:this.props.syncProperties["configuration-token-alg"]}):"",r.a.createElement("div",{className:"conf-token-input"},r.a.createElement("label",null,"configuration-token-audience"),r.a.createElement("input",{value:this.props.syncProperties["configuration-token-audience"]||"",name:"configuration-token-audience",onChange:this.changeInputHandler})))}}]),a}(r.a.Component)),Q={updateConfToken:q,toggleAlgorithm:function(e){return{type:"TOGGLE_ALGORITHM",payload:e}}},$=Object(p.b)((function(e){return{syncProperties:e.properties}}),Q)(z),K=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).onCheckboxToggle=function(){e.props.toggleAuthType()},e.onAuthSelection=function(t){t.persist(),e.props.updateAuthType(t.target.value)},e}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"divAuth"},r.a.createElement("input",{type:"checkbox",autoComplete:"off",onChange:this.onCheckboxToggle,checked:Object.keys(this.props.syncProperties).includes("auth-type")}),r.a.createElement("label",null," ","authorization"," "),r.a.createElement("select",{className:"selectAuth",value:this.props.syncProperties["auth-type"]||"",onChange:this.onAuthSelection,disabled:!Object.keys(this.props.syncProperties).includes("auth-type"),required:Object.keys(this.props.syncProperties).includes("auth-type")&&"required"},r.a.createElement("option",{value:"",disabled:!0,hidden:!0},"Select your option"),S.map((function(e){return r.a.createElement("option",{value:e,key:e},e)})))),Object.keys(this.props.syncProperties).includes("auth-type")&&"configuration-token"===this.props.syncProperties["auth-type"]?r.a.createElement($,null):"")}}]),a}(r.a.Component),Z={toggleAuthType:function(){return{type:"TOGGLE_AUTH_TYPE"}},updateAuthType:function(e){return{type:"UPDATE_AUTH_TYPE",payload:e}}},ee=Object(p.b)((function(e){return{syncProperties:e.properties}}),Z)(K),te=(a(212),function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={apis:[{title:"health",class:"health"},{title:"deliberate/observables",class:"deliberate"},{title:"refer/observables",class:"refer"},{title:"observe/observables",class:"observe"},{title:"respond/observables",class:"respond"},{title:"respond/trigger",class:"respond"},{title:"tiles",class:"tiles"},{title:"tiles/tile",class:"tiles"},{title:"tiles/tile-data",class:"tiles"}]},e}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("p",null,"Properties"),r.a.createElement("fieldset",null,r.a.createElement("p",null,"Supported APIs"),r.a.createElement("fieldset",null,this.state.apis.map((function(e){return r.a.createElement(W,{api:e,key:e.title})}))),r.a.createElement("p",null,"Auth-type"),r.a.createElement("fieldset",null,r.a.createElement(ee,null))))}}]),a}(r.a.Component)),ae=(a(213),a(18)),ne=a(2),re=(a(214),a(73),function(){return{type:"ADD_CONF_SPEC",payload:{key:"",type:"",label:"",tooltip:"",subtype:"",required:!1,group:"",options:[],id:Object(L.a)()}}}),ce=function(e){return{type:"ADD_OPTIONS",payload:{options:{value:"",label:"",id:Object(L.a)()},conf_spec_id:e}}},oe=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={value:"",label:""},e.onDeleteIconClick=function(){e.props.deleteOption(e.props.option.id,e.props.conf_spec_id)},e.onInputUpdate=function(t){t.persist(),e.props.updateOption(e.props.option.id,e.props.conf_spec_id,{name:t.target.name,value:t.target.value.trim()})},e}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"optionsWrapper"},r.a.createElement("div",{className:"column"},r.a.createElement("div",{className:"inputDiv"},"value",r.a.createElement("span",{className:"required-field"},"*"),r.a.createElement("input",{type:"text",name:"value",className:"customInput",value:this.props.option.value,onChange:this.onInputUpdate,required:!0})),r.a.createElement("div",{className:"inputDiv"},"label",r.a.createElement("span",{className:"required-field"},"*"),r.a.createElement("input",{type:"text",name:"label",className:"customInput",value:this.props.option.label,onChange:this.onInputUpdate,required:!0}))),r.a.createElement("div",{className:"optionsIconWrapper"},r.a.createElement("svg",{className:"closeIcon",onClick:this.onDeleteIconClick},r.a.createElement("use",{xlinkHref:"".concat(I.a,"#icon-small-x-close")}))))}}]),a}(r.a.Component),ie={deleteOption:function(e,t){return{type:"DELETE_OPTION",payload:{option_id:e,conf_spec_id:t}}},updateOption:function(e,t,a){return{type:"UPDATE_OPTION",payload:{option_id:e,conf_spec_id:t,pair:a}}}},le=Object(p.b)(null,ie)(oe),se=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).onButtonClick=function(){e.props.addOptions(e.props.conf_spec_id)},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("div",{className:"confSpecRow"},r.a.createElement("div",{className:"options-title"},"Options",r.a.createElement("button",{type:"button",className:"addNewButton",onClick:this.onButtonClick},"+ Add"))),this.props.options.map((function(t){return r.a.createElement(le,{key:t.id,option:t,conf_spec_id:e.props.conf_spec_id})})))}}]),a}(r.a.Component),ue={addOptions:ce},pe=Object(p.b)(null,ue)(se),de=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={showOptions:e.props.syncConfSpecItem.options.length>0},e.onSelectChange=function(t){e.onInputChange(t),"options"===t.target.value?(e.props.addOptions(e.props.role),e.setState({showOptions:!0})):(e.props.deleteAllOptions(e.props.role),e.setState({showOptions:!1}))},e.onDeleteIconClick=function(){e.props.deleteConfSpec(e.props.role)},e.trimInputValue=function(t){e.props.updateConfSpec(e.props.role,{name:t.target.name,value:t.target.value.trim()})},e.onInputChange=function(t){t.persist();var a="";a="checkbox"===t.target.type?t.target.checked:t.target.value,e.setState((function(e){return Object(ne.a)(Object(ne.a)({},e),Object(ae.a)({},t.target.name,a))})),e.props.updateConfSpec(e.props.role,{name:t.target.name,value:a})},e}return Object(l.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"confSpecWrapper"},r.a.createElement("div",{className:"column"},r.a.createElement("div",{className:"inputDiv"},r.a.createElement("label",null,"key"),r.a.createElement("span",{className:"required-field"},"*"),r.a.createElement("input",{type:"text",name:"key",className:"customInput",required:!0,value:this.props.syncConfSpecItem.key,onChange:this.onInputChange,onBlur:this.trimInputValue,list:"key-input-list"})),r.a.createElement("datalist",{id:"key-input-list"},P.map((function(t){return r.a.createElement("option",{key:"".concat(t," ").concat(e.props.role)},t)}))),r.a.createElement("div",{className:"inputDiv"},r.a.createElement("label",null,"type"),r.a.createElement("span",{className:"required-field"},"*"),r.a.createElement("select",{name:"type",className:"customInput",required:!0,value:this.props.syncConfSpecItem.type||"",onChange:this.onSelectChange},r.a.createElement("option",{value:"",disabled:!0,hidden:!0},"Select your option"),N.map((function(e){return r.a.createElement("option",{key:e},e)})))),this.state.showOptions?r.a.createElement(pe,{conf_spec_id:this.props.role,options:this.props.syncConfSpecItem.options}):null,r.a.createElement("div",{className:"inputDiv"},r.a.createElement("label",null,"label"),r.a.createElement("span",{className:"required-field"},"*"),r.a.createElement("input",{type:"text",name:"label",className:"customInput",required:!0,value:this.props.syncConfSpecItem.label,onChange:this.onInputChange,onBlur:this.trimInputValue})),r.a.createElement("div",{className:"inputDiv"},r.a.createElement("label",null,"tooltip"),r.a.createElement("input",{type:"text",name:"tooltip",className:"customInput",value:this.props.syncConfSpecItem.tooltip,onChange:this.onInputChange,onBlur:this.trimInputValue})),r.a.createElement("div",{className:"inputDiv"},r.a.createElement("label",null,"subtype"),r.a.createElement("input",{type:"text",name:"subtype",className:"customInput",value:this.props.syncConfSpecItem.subtype,onChange:this.onInputChange,onBlur:this.trimInputValue})),r.a.createElement("div",{className:"inputDiv"},r.a.createElement("label",null,"group"),r.a.createElement("input",{type:"text",name:"group",className:"customInput",value:this.props.syncConfSpecItem.group,onChange:this.onInputChange,onBlur:this.trimInputValue})),r.a.createElement("div",{className:"checkboxDiv"},r.a.createElement("label",null,"required"),r.a.createElement("input",{type:"checkbox",name:"required",checked:this.props.syncConfSpecItem.required,onChange:this.onInputChange}))),r.a.createElement("div",null,r.a.createElement("svg",{className:"closeIcon",onClick:this.onDeleteIconClick},r.a.createElement("use",{xlinkHref:"".concat(I.a,"#icon-small-x-close")}))))}}]),a}(r.a.Component),me={addOptions:ce,deleteAllOptions:function(e){return{type:"DELETE_ALL_OPTIONS",payload:{conf_spec_id:e}}},deleteConfSpec:function(e){return{type:"DELETE_CONF_SPEC",payload:{conf_spec_id:e}}},updateConfSpec:function(e,t){return{type:"UPDATE_CONF_SPEC",payload:{conf_spec_id:e,pair:t}}}},he=Object(p.b)((function(e){return{syncConfSpec:e.configuration_spec}}),me)(de),fe=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"confSpecRow"},r.a.createElement("div",null,r.a.createElement("label",null,"Configuration Spec"),r.a.createElement("button",{type:"button",onClick:this.props.addConfSpec},"+ Add"))),this.props.syncConfSpec.map((function(e){return r.a.createElement(he,{role:e.id,key:e.id,syncConfSpecItem:e})})))}}]),a}(r.a.Component),Ee={addConfSpec:re},be=Object(p.b)((function(e){return{syncConfSpec:e.configuration_spec}}),Ee)(fe),ye=(a(215),function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).trimInputValue=function(t){e.props.updateCapabilityDescription({id:e.props.api.id,description:t.target.value.trim()})},e.onDescriptionChange=function(t){t.persist(),e.props.updateCapabilityDescription({id:e.props.api.id,description:t.target.value})},e}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"capabilitiesWrapper"},r.a.createElement("p",null,this.props.api.id,r.a.createElement("span",{className:"required-field"},"*")),r.a.createElement("input",{type:"text",value:this.props.api.description||"",name:this.props.api.id,placeholder:"Enter description",autoComplete:"off",onChange:this.onDescriptionChange,onBlur:this.trimInputValue,required:!0}))}}]),a}(r.a.Component)),ve={updateCapabilityDescription:function(e){return{type:"UPDATE_CAPABILITY_DESCR",payload:{id:e.id,description:e.description}}}},_e=Object(p.b)(null,ve)(ye),Oe=(a(216),Object(p.b)((function(e){return{syncCapabilities:e.capabilities}}))((function(e){var t=e.syncCapabilities;return r.a.createElement("div",null,r.a.createElement("p",null,"Capabilities"),r.a.createElement("fieldset",null,r.a.createElement("p",{className:"capabilitiesTip"},"Select at least one of the Supported APIs to write a description"),t.map((function(e){return r.a.createElement(_e,{api:e,key:e.id})}))))}))),ge=(a(217),a(90)),je={deleteLogo:function(){return{type:"DELETE_LOGO"}},onFileLoaded:b},Ce=Object(p.b)(null,je)((function(e){var t=e.value,a=e.deleteLogo,c=e.onFileLoaded,o=Object(n.useCallback)((function(e){var t=e[0];if(t){var a=new FileReader;a.onload=function(){var e=a.result;c(e)},a.readAsDataURL(t)}}),[c]),i=Object(ge.a)({onDrop:o,multiple:!1,accept:"image/*"}),l=i.getRootProps,s=i.getInputProps,u=i.isDragActive;return r.a.createElement("div",{className:"dropzone-wrapper"},r.a.createElement("div",l({className:"dropzone".concat(u?"-active":"")}),r.a.createElement("input",s()),r.a.createElement("p",null,"Drag 'n' drop your logo here, or click to select logo")),Boolean(t)&&r.a.createElement("div",null,r.a.createElement("img",{src:t,alt:"",height:"60",className:"img"}),r.a.createElement("svg",{className:"closeIcon",onClick:a},r.a.createElement("use",{xlinkHref:"".concat(I.a,"#icon-small-x-close")}))))})),Ae=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).changeInputHandler=function(t){t.persist(),e.props.updateSingleInput({name:t.target.name,value:t.target.value})},e.trimInputValue=function(t){e.props.updateSingleInput({name:t.target.name,value:t.target.value.trim()})},e.trimFlags=function(t){e.props.updateFlags(t.target.value.split(",").map((function(e){return e.trim()})))},e.changeFlagsHandler=function(t){t.persist(),e.props.updateFlags(t.target.value.split(","))},e.handleLoadLocalFile=function(t){t.preventDefault();var a=t.target.files[0];if(a){var n=new FileReader;n.onloadend=function(){return e.props.onFileLoaded(n.result)},n.readAsDataURL(a)}},e}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"content"},r.a.createElement("div",{className:"row"},r.a.createElement("h1",{className:"title"},"Module")),r.a.createElement("form",{id:"mainForm"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"column"},r.a.createElement("label",{className:"input-label"},"Title",r.a.createElement("span",{className:"required-field"},"*")),r.a.createElement("textarea",{required:!0,autoComplete:"off",value:this.props.syncContent.title||"",name:"title",onChange:this.changeInputHandler,onBlur:this.trimInputValue}),r.a.createElement("label",{className:"input-label"},"Default Name",r.a.createElement("span",{className:"required-field"},"*")),r.a.createElement("textarea",{required:!0,autoComplete:"off",value:this.props.syncContent.default_name||"",name:"default_name",onChange:this.changeInputHandler,onBlur:this.trimInputValue}),r.a.createElement("label",{className:"input-label"},"Short Description"),r.a.createElement("textarea",{autoComplete:"off",value:this.props.syncContent.short_description||"",name:"short_description",onChange:this.changeInputHandler,onBlur:this.trimInputValue}),r.a.createElement("label",{className:"input-label"},"Flags"),r.a.createElement("input",{type:"text",name:"flags",placeholder:"Enter flags separated by commas",autoComplete:"off",value:this.props.syncContent.flags||"",onChange:this.changeFlagsHandler,onBlur:this.trimFlags}),r.a.createElement("label",{className:"input-label"},"Logo"),r.a.createElement(Ce,{value:this.props.syncContent.logo,onChange:this.handleLoadLocalFile}),r.a.createElement(te,null),r.a.createElement(Oe,null),r.a.createElement(M,null),r.a.createElement(be,null)),r.a.createElement("div",{className:"column"},r.a.createElement("label",{className:"input-label"},"Description"),r.a.createElement(_,{name:"description"}),r.a.createElement("label",{className:"input-label"},"Tips"),r.a.createElement(_,{name:"tips"})))))}}]),a}(r.a.Component),Pe={updateSingleInput:E,updateFlags:function(e){return{type:"UPDATE_FlAGS",payload:e}},onFileLoaded:b,addConfSpec:re},Ne=Object(p.b)((function(e){return{syncContent:e.other_inputs}}),Pe)(Ae),ke=(a(218),a(7)),Se=a.n(ke),Te=a(22),De=a(12),we=(a(220),a(32)),xe=a.n(we),Ie=function(e){return{type:"READ_STATE_FROM_BACKEND",payload:e}},Le=function(e,t){return{type:"PATCH_MODULE_TYPE_SUCCESS",payload:{data:e,url:t}}},Re=function(e){return{type:"PULL_MODULE_TYPE_ERROR",payload:e}},Fe=function(){return{type:"HIDE_MODAL_FOR_PUSH"}},He=function(){return{type:"HIDE_MODAL_FOR_PATCH"}},Ue=function(){return{type:"HIDE_MODAL_FOR_PULL"}},Be=function(e,t){return{type:"SHOW_ALERT",payload:{title:e,message:t}}},Me={hideModalForPush:Fe,showAlert:Be,pushModuleTypeRequest:function(e,t){return{type:"PUSH_MODULE_TYPE_REQUEST",payload:{json:e,client_id:t.client_id,password:t.password,iroh_service_url:t.iroh_service_url}}}},qe=Object(p.b)((function(e){return{loader:e.elements_visibility.loader}}),Me)((function(e){return r.a.createElement("div",{className:"modal",id:"modal"},r.a.createElement(De.d,{initialValues:{client_id:"",password:"",iroh_service_url:""},validate:function(e){var t={};return e.client_id||(t.client_id="is required"),e.password||(t.password="is required"),e.iroh_service_url||(t.iroh_service_url="is required"),t},onSubmit:function(){var t=Object(Te.a)(Se.a.mark((function t(a,n){var r;return Se.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=n.setSubmitting,e.pushModuleTypeRequest(e.json,a),r(!1);case 3:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},(function(t){var a=t.isSubmitting;return e.loader?r.a.createElement(xe.a,{loaded:!1,className:"spinner"}):r.a.createElement(De.c,{className:"modal-content"},r.a.createElement("svg",{className:"closeIcon",onClick:e.hideModalForPush},r.a.createElement("use",{xlinkHref:"".concat(I.a,"#icon-small-x-close")})),r.a.createElement("p",{className:"push-modal-text"},"Create a new module type in your Threat Response organization"),r.a.createElement("label",{htmlFor:"client_id",className:"centered"},"Client ID"),r.a.createElement("div",null,r.a.createElement(De.b,{type:"text",name:"client_id",id:"client_id",required:!0}),r.a.createElement(De.a,{name:"client_id",component:"div",className:"error"})),r.a.createElement("label",{htmlFor:"password",className:"centered"},"Client Password"),r.a.createElement("div",null,r.a.createElement(De.b,{name:"password",type:"password",id:"password",required:!0}),r.a.createElement(De.a,{name:"password",component:"div",className:"error"})),r.a.createElement("label",{htmlFor:"iroh_service_url",className:"centered"},"Region"),r.a.createElement("div",null,r.a.createElement(De.b,{as:"select",name:"iroh_service_url",required:!0},r.a.createElement("option",{value:"",disabled:!0,hidden:!0},"Select your option"),r.a.createElement("option",{value:O},"Europe"),r.a.createElement("option",{value:g},"North America"),r.a.createElement("option",{value:j},"Asia")),r.a.createElement(De.a,{name:"iroh_service_url",component:"div",className:"error"})),r.a.createElement("div",{className:"controls"},r.a.createElement("button",{type:"button",onClick:e.hideModalForPush,className:"cancel"},"Cancel"),r.a.createElement("button",{type:"submit",disabled:a,className:"submit"},"Push")))})))})),Ve=(a(224),function(e){var t=e.title,a=e.message,n=e.closeAlertHandler;return r.a.createElement("div",{className:"alert"},r.a.createElement("div",{className:"alertContent"},r.a.createElement("div",{className:"alertHeader"},t,r.a.createElement("svg",{className:"closeIcon",onClick:n},r.a.createElement("use",{xlinkHref:"".concat(I.a,"#icon-small-x-close")}))),r.a.createElement("div",{className:"alertBody"},a),r.a.createElement("div",{className:"alertFooter"},r.a.createElement("button",{type:"button",className:"closeButton",onClick:n},"Close"))))}),Ye=new(a(89).Validator);Ye.addSchema({id:"/Capability",type:"object",properties:{id:{type:"string",enum:["respond","observe","health","tiles","refer","deliberate"]},description:{type:"string"}},additionalProperties:!1,required:["id","description"]},"/Capability"),Ye.addSchema({id:"/ExternalReference",type:"object",properties:{label:{type:"string"},link:{type:"string"}},additionalProperties:!1,required:["label","link"]},"/ExternalReference"),Ye.addSchema({type:"object",properties:{"supported-apis":{type:"array",items:{type:"string"}},"auth-type":{type:"string"}}},"/Properties"),Ye.addSchema({id:"/ConfigurationSpecOptions",type:"object",properties:{value:{type:"string"},label:{type:"string"}},additionalProperties:!1,required:["value","label"]},"/ConfigurationSpecOptions"),Ye.addSchema({id:"/ConfigurationSpecField",type:"object",properties:{key:{type:"string"},type:{type:"string",enum:["password","string","api_key","integer","device","options","boolean"]},label:{type:"string"},tooltip:{type:"string"},subtype:{type:"string"},required:{type:"boolean"},options:{type:"array",items:{$ref:"/ConfigurationSpecOptions"}},group:{type:"string"}},additionalProperties:!1,required:["key","type","label"]},"/ConfigurationSpecField");var We={type:"object",properties:{description:{type:"string"},tips:{type:"string"},logo:{type:"string"},short_description:{type:"string"},title:{type:"string"},flags:{type:"array"},external_references:{type:"array",items:{$ref:"/ExternalReference"}},configuration_spec:{type:"array",items:{$ref:"/ConfigurationSpecField"}},capabilities:{type:"array",items:{$ref:"/Capability"}},properties:{$ref:"/Properties"}},required:["title","default_name"]},Je=(a(232),{pullModuleTypeRequest:function(e,t,a,n){return{type:"PULL_MODULE_TYPE_REQUEST",payload:{module_type_id:e,client_id:t,password:a,iroh_service_url:n}}},hideModalForPull:Ue}),Ge=Object(p.b)((function(e){return{loader:e.elements_visibility.loader}}),Je)((function(e){return r.a.createElement("div",{className:"modal",id:"modal"},r.a.createElement(De.d,{initialValues:{client_id:"",password:"",module_type_id:"",iroh_service_url:""},validate:function(e){var t={};return e.client_id||(t.client_id="is required"),e.password||(t.password="is required"),e.module_type_id||(t.module_type_id="is required"),e.iroh_service_url||(t.iroh_service_url="is required"),t},onSubmit:function(){var t=Object(Te.a)(Se.a.mark((function t(a,n){var r;return Se.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=n.setSubmitting,e.pullModuleTypeRequest(a.module_type_id,a.client_id,a.password,a.iroh_service_url),r(!1);case 3:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},(function(t){var a=t.isSubmitting;return e.loader?r.a.createElement(xe.a,{loaded:!1,className:"spinner"}):r.a.createElement(De.c,{className:"modal-content"},r.a.createElement("svg",{className:"closeIcon",onClick:e.hideModalForPull},r.a.createElement("use",{xlinkHref:"".concat(I.a,"#icon-small-x-close")})),r.a.createElement("p",{className:"push-modal-text"},"Pull module type from your Threat Response organization"),r.a.createElement("label",{htmlFor:"client_id",className:"centered"},"Client ID"),r.a.createElement("div",null,r.a.createElement(De.b,{type:"text",name:"client_id",id:"client_id",required:!0}),r.a.createElement(De.a,{name:"client_id",component:"div",className:"error"})),r.a.createElement("label",{htmlFor:"password",className:"centered"},"Client Password"),r.a.createElement("div",null,r.a.createElement(De.b,{name:"password",type:"password",id:"password",required:!0}),r.a.createElement(De.a,{name:"password",component:"div",className:"error"})),r.a.createElement("label",{htmlFor:"module_type_id",className:"centered"},"Module Type ID"),r.a.createElement("div",null,r.a.createElement(De.b,{name:"module_type_id",type:"module_type_id",id:"module_type_id",required:!0}),r.a.createElement(De.a,{name:"module_type_id",component:"div",className:"error"})),r.a.createElement("label",{htmlFor:"iroh_service_url",className:"centered"},"Region"),r.a.createElement("div",null,r.a.createElement(De.b,{as:"select",name:"iroh_service_url",required:!0},r.a.createElement("option",{value:"",disabled:!0,hidden:!0},"Select your option"),r.a.createElement("option",{value:O},"Europe"),r.a.createElement("option",{value:g},"North America"),r.a.createElement("option",{value:j},"Asia")),r.a.createElement(De.a,{name:"iroh_service_url",component:"div",className:"error"})),r.a.createElement("div",{className:"controls"},r.a.createElement("button",{type:"button",onClick:e.hideModalForPull,className:"cancel"},"Cancel"),r.a.createElement("button",{type:"submit",disabled:a,className:"submit"},"Pull")))})))})),Xe=a(42);var ze=function(e){var t=e.external_references,a=e.configuration_spec,n=e.properties,r=e.capabilities,c=e.other_inputs;return Object(ne.a)({external_references:t,configuration_spec:a,properties:n,capabilities:r},c)},Qe=function(e){return e.response?e.response.data.error_description||e.response.message:e.message},$e=a(29),Ke={hideModalForPatch:He,showAlert:Be,patchModuleTypeRequest:function(e,t,a,n){return{type:"PATCH_MODULE_TYPE_REQUEST",payload:{module_type_id:e,client_id:t,password:a,iroh_service_url:n}}}},Ze=Object(p.b)((function(e){return{loader:e.elements_visibility.loader}}),Ke)((function(e){return r.a.createElement("div",{className:"modal",id:"modal"},r.a.createElement(De.d,{initialValues:{client_id:"",password:"",module_type_id:"",iroh_service_url:""},validate:function(e){return Object.fromEntries(Object.entries(e).filter((function(e){var t=Object($e.a)(e,2);t[0];return!t[1]})).map((function(e){var t=Object($e.a)(e,2),a=t[0];t[1];return[a,"is required"]})))},onSubmit:function(){var t=Object(Te.a)(Se.a.mark((function t(a,n){var r;return Se.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=n.setSubmitting,e.patchModuleTypeRequest(a.module_type_id,a.client_id,a.password,a.iroh_service_url),r(!1);case 3:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}()},(function(t){var a=t.isSubmitting;return e.loader?r.a.createElement(xe.a,{loaded:!1,className:"spinner"}):r.a.createElement(De.c,{className:"modal-content"},r.a.createElement("svg",{className:"closeIcon",onClick:e.hideModalForPatch},r.a.createElement("use",{xlinkHref:"".concat(I.a,"#icon-small-x-close")})),r.a.createElement("p",{className:"push-modal-text"},"Pull module type JSON to create Patch file"),r.a.createElement("label",{htmlFor:"client_id",className:"centered"},"Client ID"),r.a.createElement("div",null,r.a.createElement(De.b,{type:"text",name:"client_id",id:"client_id",required:!0}),r.a.createElement(De.a,{name:"client_id",component:"div",className:"error"})),r.a.createElement("label",{htmlFor:"password",className:"centered"},"Client Password"),r.a.createElement("div",null,r.a.createElement(De.b,{name:"password",type:"password",id:"password",required:!0}),r.a.createElement(De.a,{name:"password",component:"div",className:"error"})),r.a.createElement("label",{htmlFor:"module_type_id",className:"centered"},"Module Type ID"),r.a.createElement("div",null,r.a.createElement(De.b,{name:"module_type_id",type:"module_type_id",id:"module_type_id",required:!0}),r.a.createElement(De.a,{name:"module_type_id",component:"div",className:"error"})),r.a.createElement("label",{htmlFor:"iroh_service_url",className:"centered"},"Region"),r.a.createElement("div",null,r.a.createElement(De.b,{as:"select",name:"iroh_service_url",required:!0},r.a.createElement("option",{value:"",disabled:!0,hidden:!0},"Select your option"),r.a.createElement("option",{value:O},"Europe"),r.a.createElement("option",{value:g},"North America"),r.a.createElement("option",{value:j},"Asia")),r.a.createElement(De.a,{name:"iroh_service_url",component:"div",className:"error"})),r.a.createElement("div",{className:"controls"},r.a.createElement("button",{type:"button",onClick:e.hideModalForPatch,className:"cancel"},"Cancel"),r.a.createElement("button",{type:"submit",disabled:a,className:"submit"},"Pull")))})))})),et=a(44);function tt(e){var t,a=JSON.parse(JSON.stringify(e)),n=Object(Xe.a)(a.configuration_spec);try{var r=function(){var e=t.value;e.options&&e.options.map((function(e){return delete e.id})),delete e.id,Object.keys(e).forEach((function(t){return 0===e[t].length&&delete e[t]}))};for(n.s();!(t=n.n()).done;)r()}catch(c){n.e(c)}finally{n.f()}return a.external_references.map((function(e){return delete e.id})),function(e){var t,a={},n=Object(Xe.a)(A);try{for(n.s();!(t=n.n()).done;){var r=t.value;r in e&&(a[r]=e[r])}}catch(c){n.e(c)}finally{n.f()}return a}(a)}function at(e,t,a,n){var r=ze(e.json),c=e.id,o=function(e,t){return Object(et.transform)(e,(function(e,a,n){Object(et.isEqual)(a,t[n])||(e[n]=a)}))}(tt(t),tt(r));if(Object(et.isEmpty)(o))n("Please, make your changes","Please, make your changes to save a patch json!");else{var i=w;Object.values(i).forEach((function(e){e[0].name=t.title,e[0].patch=o})),i[C[e.url]][0].id=c;var l=JSON.stringify(i,null,4),s=new Blob([l],{type:"text/plain"}),u=URL.createObjectURL(s),p=document.createElement("a"),d=t.title.replace(/ /g,"_");p.download="".concat(d,"_module_type_patch.json"),p.href=u,p.click(),a()}}a(233);var nt=function(e){var t=e.title,a=e.message,n=e.closeClickHandler,c=e.okClickHandler;return r.a.createElement("div",{className:"alert"},r.a.createElement("div",{className:"alertContent"},r.a.createElement("div",{className:"alertHeader"},t,r.a.createElement("svg",{className:"closeIcon",onClick:n},r.a.createElement("use",{xlinkHref:"".concat(I.a,"#icon-small-x-close")}))),r.a.createElement("div",{className:"alertBody"},a),r.a.createElement("div",{className:"alertFooter"},r.a.createElement("button",{type:"button",className:"cancelButton",onClick:n},"Cancel"),r.a.createElement("button",{type:"button",className:"okButton",onClick:c},"Discard patch"))))},rt=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;Object(i.a)(this,a);for(var r=arguments.length,c=new Array(r),o=0;o<r;o++)c[o]=arguments[o];return(e=t.call.apply(t,[this].concat(c))).state={inputEl:Object(n.createRef)()},e.onSaveButtonClick=function(){if(e.isValidForm()){var t=tt(e.props.syncJSON),a=JSON.stringify(t,null,4),n=new Blob([a],{type:"text/plain"}),r=URL.createObjectURL(n),c=document.createElement("a"),o=t.title.replace(/ /g,"_");c.download="".concat(o,"_module_type.json"),c.href=r,c.click()}},e.onPushButtonClick=function(){e.isValidForm()&&e.props.showModalForPush()},e.onCreatePatchClick=function(){e.props.isPatchActive?e.isValidForm()&&at(e.props.patchBase,e.props.syncJSON,e.props.deactivatePatch,e.props.showAlert):e.props.showModalForPatch()},e.handleFile=function(t){t.preventDefault();var a=t.target.files[0];if(a){var n=new FileReader;n.onload=function(){try{var t=JSON.parse(n.result),a=Ye.validate(t,We);a.valid?e.props.readStateFromBackend(t):e.props.showAlert(D,"Wrong JSON structure: "+a.errors.join(", "))}catch(r){e.props.showAlert(D,String(r))}},n.onerror=function(){e.props.showAlert(D,"Error occurred reading file: "+a.name)},n.readAsText(a,"UTF-8")}},e.onOpenButtonClick=function(){var t=e.state.inputEl.current;t.click(),t.addEventListener("change",e.handleFile,!1)},e}return Object(l.a)(a,[{key:"isValidForm",value:function(){return document.getElementById("mainForm").reportValidity()}},{key:"render",value:function(){return r.a.createElement("div",{className:"Sidebar"},r.a.createElement("p",null,"Settings"),r.a.createElement("ul",null,r.a.createElement("input",{type:"file",ref:this.state.inputEl,accept:"application/JSON"}),r.a.createElement("li",{onClick:this.props.isPatchActive?this.props.showConfirmBox:this.onOpenButtonClick},"Open JSON from File"),r.a.createElement("li",{onClick:this.props.isPatchActive?this.props.showConfirmBox:this.props.showModalForPull},"Open JSON from TR API"),r.a.createElement("li",{onClick:this.props.isPatchActive?this.props.showConfirmBox:this.onSaveButtonClick},"Save JSON"),r.a.createElement("li",{onClick:this.props.isPatchActive?this.props.showConfirmBox:this.onPushButtonClick},"Push JSON to TR"),r.a.createElement("li",{onClick:this.onCreatePatchClick},this.props.isPatchActive?"Save Patch JSON":"Create Patch JSON")),this.props.modalForPush&&r.a.createElement(qe,{json:tt(this.props.syncJSON)}),this.props.modalForPatch&&r.a.createElement(Ze,null),this.props.customAlert&&r.a.createElement(Ve,{title:this.props.customAlert.title,message:this.props.customAlert.message,closeAlertHandler:this.props.hideAlert}),this.props.modalForPull&&r.a.createElement(Ge,null),this.props.confirmBox&&r.a.createElement(nt,{message:"If you discard this patch you will have to start a new Create patch flow. Are you sure you want to discard this patch?",title:"Discard patch",closeClickHandler:this.props.hideConfirmBox,okClickHandler:this.props.deactivatePatch}))}}]),a}(r.a.Component),ct={readStateFromBackend:Ie,showModalForPush:function(){return{type:"SHOW_MODAL_FOR_PUSH"}},showModalForPatch:function(){return{type:"SHOW_MODAL_FOR_PATCH"}},hideModalForPush:Fe,showModalForPull:function(){return{type:"SHOW_MODAL_FOR_PULL"}},hideModalForPull:Ue,showConfirmBox:function(e,t){return{type:"SHOW_CONFIRM_BOX",payload:{title:e,message:t}}},hideConfirmBox:function(){return{type:"HIDE_CONFIRM_BOX"}},deactivatePatch:function(){return{type:"DEACTIVATE_PATCH"}},showAlert:Be,hideAlert:function(){return{type:"HIDE_ALERT"}}},ot=Object(p.b)((function(e){return{syncJSON:ze(e),patchBase:e.patch_base,modalForPush:e.elements_visibility.modalForPush,modalForPatch:e.elements_visibility.modalForPatch,modalForPull:e.elements_visibility.modalForPull,customAlert:e.elements_visibility.customAlert,confirmBox:e.elements_visibility.confirmBox,isPatchActive:e.elements_visibility.isPatchActive}}),ct)(rt),it=(a(234),function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(i.a)(this,a),t.apply(this,arguments)}return Object(l.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"header"},r.a.createElement("div",null,r.a.createElement("svg",{className:"iconCiscoLogo"},r.a.createElement("use",{xlinkHref:"".concat(I.a,"#icon-cisco-logo")}))),r.a.createElement("div",null,r.a.createElement("p",{className:"headerTitle"},"Threat Response Module Maker")))}}]),a}(r.a.Component));var lt=function(){return r.a.createElement("div",{className:"App"},r.a.createElement(it,null),r.a.createElement("div",{className:"site"},r.a.createElement(ot,null),r.a.createElement(Ne,null)))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var st=a(26),ut=[];function pt(e,t){var a=e.filter((function(e){return e.id===t.conf_spec_id}));return e.indexOf(a[0])}var dt={"supported-apis":[]},mt=[],ht={modalForPush:!1,modalForPatch:!1,modalForPull:!1,loader:!1,customAlert:null,confirmBox:null,isPatchActive:!1},ft=a(92),Et=Object(st.c)({other_inputs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_SINGLE_INPUT":return Object(ne.a)(Object(ne.a)({},e),{},Object(ae.a)({},t.payload.name,t.payload.value));case"UPDATE_FlAGS":return Object(ne.a)(Object(ne.a)({},e),{},{flags:t.payload});case"LOAD_FILE":return Object(ne.a)(Object(ne.a)({},e),{},{logo:t.payload});case"DELETE_LOGO":return Object(ne.a)(Object(ne.a)({},e),{},{logo:""});default:return e}},properties:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_SUPPORTED_API":return e["supported-apis"].includes(t.payload)?Object(ne.a)(Object(ne.a)({},e),{},{"supported-apis":e["supported-apis"].filter((function(e){return e!==t.payload}))}):Object(ne.a)(Object(ne.a)({},e),{},{"supported-apis":e["supported-apis"].concat([t.payload])});case"TOGGLE_AUTH_TYPE":return Object.keys(e).includes("auth-type")?Object.fromEntries(Object.entries(e).filter((function(e){var t=Object($e.a)(e,2),a=t[0];t[1];return"supported-apis"===a}))):Object(ne.a)(Object(ne.a)({},e),{},{"auth-type":""});case"UPDATE_AUTH_TYPE":return Object(ne.a)(Object(ne.a)({},e),{},{"auth-type":t.payload});case"UPDATE_CONF_TOKEN":return Object(ne.a)(Object(ne.a)({},e),{},Object(ae.a)({},t.payload.name,t.payload.value));case"TOGGLE_ALGORITHM":return"RS256"===t.payload?Object.fromEntries(Object.entries(e).filter((function(e){var t=Object($e.a)(e,2),a=t[0];t[1];return"configuration-token-key"!==a}))):Object.fromEntries(Object.entries(e).filter((function(e){var t=Object($e.a)(e,2),a=t[0];t[1];return"custom_jwks_host"!==a})));default:return e}},capabilities:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_CAPABILITY":return 0===e.filter((function(e){return Object.values(e).includes(t.payload.id)})).length?e.concat([t.payload]):e;case"DELETE_CAPABILITY":return e.filter((function(e){return e.id!==t.payload}));case"UPDATE_CAPABILITY_DESCR":var a=e.filter((function(e){return e.id===t.payload.id})),n=e.indexOf(a[0]);return e.map((function(e,a){return a!==n?e:Object(ne.a)(Object(ne.a)({},e),t.payload)}));default:return e}},external_references:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ut,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_EXTERNAL_REFERENCE":return e.concat({label:"",link:"",id:t.payload.id});case"DELETE_EXTERNAL_REFERENCE":return e.filter((function(e){return!Object.values(e).includes(t.payload)}));case"UPDATE_EXTERNAL_REFERENCE":return e.map((function(e){return e.id!==t.payload.id?e:Object(ne.a)(Object(ne.a)({},e),{},Object(ae.a)({},t.payload.pair.name,t.payload.pair.value))}));default:return e}},configuration_spec:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_CONF_SPEC":return e.concat([t.payload]);case"ADD_OPTIONS":return e.map((function(a,n){return n!==pt(e,t.payload)?a:Object(ne.a)(Object(ne.a)({},a),{},{options:a.options.concat(t.payload.options)})}));case"DELETE_CONF_SPEC":return e.filter((function(e){return e.id!==t.payload.conf_spec_id}));case"DELETE_ALL_OPTIONS":return e.map((function(a,n){return n!==pt(e,t.payload)?a:Object(ne.a)(Object(ne.a)({},a),{},{options:[]})}));case"DELETE_OPTION":return e.map((function(a,n){return n!==pt(e,t.payload)?a:Object(ne.a)(Object(ne.a)({},a),{},{options:a.options.filter((function(e){return e.id!==t.payload.option_id}))})}));case"UPDATE_CONF_SPEC":return e.map((function(a,n){return n!==pt(e,t.payload)?a:Object(ne.a)(Object(ne.a)({},a),{},Object(ae.a)({},t.payload.pair.name,t.payload.pair.value))}));case"UPDATE_OPTION":return e.map((function(a,n){return n!==pt(e,t.payload)?a:Object(ne.a)(Object(ne.a)({},a),{},{options:a.options.map((function(e){return e.id!==t.payload.option_id?e:Object(ne.a)(Object(ne.a)({},e),{},Object(ae.a)({},t.payload.pair.name,t.payload.pair.value))}))})}));default:return e}},elements_visibility:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ht,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SHOW_MODAL_FOR_PUSH":return Object(ne.a)(Object(ne.a)({},e),{},{modalForPush:!0});case"HIDE_MODAL_FOR_PUSH":return Object(ne.a)(Object(ne.a)({},e),{},{modalForPush:!1});case"SHOW_MODAL_FOR_PATCH":return Object(ne.a)(Object(ne.a)({},e),{},{modalForPatch:!0});case"HIDE_MODAL_FOR_PATCH":return Object(ne.a)(Object(ne.a)({},e),{},{modalForPatch:!1});case"SHOW_LOADER":return Object(ne.a)(Object(ne.a)({},e),{},{loader:!0});case"HIDE_LOADER":return Object(ne.a)(Object(ne.a)({},e),{},{loader:!1});case"SHOW_MODAL_FOR_PULL":return Object(ne.a)(Object(ne.a)({},e),{},{modalForPull:!0});case"HIDE_MODAL_FOR_PULL":return Object(ne.a)(Object(ne.a)({},e),{},{modalForPull:!1});case"SHOW_ALERT":return Object(ne.a)(Object(ne.a)({},e),{},{customAlert:Object(ne.a)(Object(ne.a)({},e.customAlert),t.payload)});case"HIDE_ALERT":return Object(ne.a)(Object(ne.a)({},e),{},{customAlert:null});case"SHOW_CONFIRM_BOX":return Object(ne.a)(Object(ne.a)({},e),{},{confirmBox:Object(ne.a)(Object(ne.a)({},e.confirmBox),t.payload)});case"HIDE_CONFIRM_BOX":return Object(ne.a)(Object(ne.a)({},e),{},{confirmBox:null});case"ACTIVATE_PATCH":return Object(ne.a)(Object(ne.a)({},e),{},{isPatchActive:!0});case"DEACTIVATE_PATCH":return Object(ne.a)(Object(ne.a)({},e),{},{isPatchActive:!1,confirmBox:null});default:return e}},patch_base:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SAVE_PATCH_BASE":var a=t.payload.json;return Object(ne.a)(Object(ne.a)({},e),{},{json:function(e){e.elements_visibility;return Object(ft.a)(e,["elements_visibility"])}(a),id:t.payload.id,url:t.payload.url});default:return e}}});function bt(e){return e&&e.map((function(e){return e.id=Object(L.a)()})),e||[]}var yt=a(91),vt=a(5),_t=a(45),Ot=a.n(_t);function gt(e){return jt.apply(this,arguments)}function jt(){return(jt=Object(Te.a)(Se.a.mark((function e(t){return Se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ot()({baseURL:t.iroh_service_url,url:"/iroh/oauth2/token",method:"post",headers:{"Content-Type":"application/x-www-form-urlencoded",Accept:"application/json",Authorization:"Basic "+btoa(t.client_id+":"+t.password)},data:"grant_type=client_credentials"}).then((function(e){return e.data.access_token})).catch((function(e){throw e})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ct(e,t){return At.apply(this,arguments)}function At(){return(At=Object(Te.a)(Se.a.mark((function e(t,a){return Se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ot()({baseURL:t.iroh_service_url,url:"/iroh/iroh-int/module-type/"+t.module_type_id,method:"get",headers:{Accept:"application/json",Authorization:"Bearer "+a}}).then((function(e){return e.data})).catch((function(e){throw e})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pt(e,t){return Nt.apply(this,arguments)}function Nt(){return(Nt=Object(Te.a)(Se.a.mark((function e(t,a){return Se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Ot()({baseURL:a.iroh_service_url,url:"/iroh/iroh-int/module-type",method:"post",headers:{"Content-Type":"application/json",Accept:"application/json",Authorization:"Bearer "+t},data:a.json}).then((function(e){return e.data.id})).catch((function(e){throw e})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var kt=Se.a.mark(Ft),St=Se.a.mark(Ht),Tt=Se.a.mark(Ut),Dt=Se.a.mark(Bt),wt=Se.a.mark(Mt),xt=Se.a.mark(qt),It=Se.a.mark(Vt),Lt=Se.a.mark(Yt),Rt=Se.a.mark(Jt);function Ft(){return Se.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(vt.d)("PULL_MODULE_TYPE_REQUEST",Bt);case 2:return e.next=4,Object(vt.d)("PUSH_MODULE_TYPE_REQUEST",Vt);case 4:return e.next=6,Object(vt.d)("PULL_MODULE_TYPE_SUCCESS",Ht);case 6:return e.next=8,Object(vt.d)("PULL_MODULE_TYPE_ERROR",Ut);case 8:return e.next=10,Object(vt.d)("PUSH_MODULE_TYPE_SUCCESS",Mt);case 10:return e.next=12,Object(vt.d)("PUSH_MODULE_TYPE_ERROR",qt);case 12:return e.next=14,Object(vt.d)("PATCH_MODULE_TYPE_REQUEST",Yt);case 14:return e.next=16,Object(vt.d)("PATCH_MODULE_TYPE_SUCCESS",Jt);case 16:case"end":return e.stop()}}),kt)}function Ht(e){return Se.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(vt.b)({type:"HIDE_LOADER"});case 2:return t.next=4,Object(vt.b)({type:"HIDE_MODAL_FOR_PULL"});case 4:return t.next=6,Object(vt.b)(Ie(e.payload));case 6:case"end":return t.stop()}}),St)}function Ut(e){return Se.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(vt.b)({type:"HIDE_LOADER"});case 2:return t.next=4,Object(vt.b)(Be(D,e.payload));case 4:case"end":return t.stop()}}),Tt)}function Bt(e){var t,a;return Se.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(vt.b)({type:"SHOW_LOADER"});case 3:return n.next=5,Object(vt.a)(gt,e.payload);case 5:return t=n.sent,n.next=8,Object(vt.a)(Ct,e.payload,t);case 8:return a=n.sent,n.next=11,Object(vt.b)({type:"PULL_MODULE_TYPE_SUCCESS",payload:a});case 11:n.next=17;break;case 13:return n.prev=13,n.t0=n.catch(0),n.next=17,Object(vt.b)(Re(Qe(n.t0)));case 17:case"end":return n.stop()}}),Dt,null,[[0,13]])}function Mt(e){return Se.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(vt.b)({type:"HIDE_LOADER"});case 2:return t.next=4,Object(vt.b)({type:"HIDE_MODAL_FOR_PUSH"});case 4:return t.next=6,Object(vt.b)(Be("Success","The module type was successfully created with id: "+e.payload));case 6:case"end":return t.stop()}}),wt)}function qt(e){return Se.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Object(vt.b)({type:"HIDE_LOADER"});case 2:return t.next=4,Object(vt.b)(Be(D,e.payload));case 4:case"end":return t.stop()}}),xt)}function Vt(e){var t,a;return Se.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(vt.b)({type:"SHOW_LOADER"});case 3:return n.next=5,Object(vt.a)(gt,e.payload);case 5:return t=n.sent,n.next=8,Object(vt.a)(Pt,t,e.payload);case 8:return a=n.sent,n.next=11,Object(vt.b)({type:"PUSH_MODULE_TYPE_SUCCESS",payload:a});case 11:n.next=17;break;case 13:return n.prev=13,n.t0=n.catch(0),n.next=17,Object(vt.b)({type:"PUSH_MODULE_TYPE_ERROR",payload:Qe(n.t0)});case 17:case"end":return n.stop()}}),It,null,[[0,13]])}function Yt(e){var t,a,n;return Se.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,Object(vt.b)({type:"SHOW_LOADER"});case 3:return r.next=5,Object(vt.a)(gt,e.payload);case 5:return t=r.sent,a=e.payload.iroh_service_url,r.next=9,Object(vt.a)(Ct,e.payload,t);case 9:return n=r.sent,r.next=12,Object(vt.b)(Le(n,a));case 12:r.next=18;break;case 14:return r.prev=14,r.t0=r.catch(0),r.next=18,Object(vt.b)(Re(Qe(r.t0)));case 18:case"end":return r.stop()}}),Lt,null,[[0,14]])}var Wt=function(e){return e};function Jt(e){var t;return Se.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,Object(vt.b)({type:"HIDE_LOADER"});case 2:return a.next=4,Object(vt.b)({type:"HIDE_MODAL_FOR_PATCH"});case 4:return a.next=6,Object(vt.b)(Ie(e.payload.data));case 6:return a.next=8,Object(vt.b)({type:"ACTIVATE_PATCH"});case 8:return a.next=10,Object(vt.c)(Wt);case 10:return t=a.sent,a.next=13,Object(vt.b)((n=e.payload.data.id,r=t,c=e.payload.url,{type:"SAVE_PATCH_BASE",payload:{id:n,json:r,url:c}}));case 13:case"end":return a.stop()}var n,r,c}),Rt)}var Gt=Object(yt.a)(),Xt=Object(st.e)((function(e,t){return"READ_STATE_FROM_BACKEND"===t.type?Object(ne.a)(Object(ne.a)({},e),{},{external_references:bt(t.payload.external_references),configuration_spec:(a=t.payload.configuration_spec,(a=bt(a))&&a.map((function(e){return e.options=bt(e.options)})),a),properties:t.payload.properties||{"supported-apis":[]},capabilities:t.payload.capabilities||[],other_inputs:{title:t.payload.title,short_description:t.payload.short_description,tips:t.payload.tips,description:t.payload.description,flags:t.payload.flags,logo:t.payload.logo,default_name:t.payload.default_name}}):Et(e,t);var a}),Object(st.a)(Gt));Gt.run(Ft);var zt=r.a.createElement(p.a,{store:Xt},r.a.createElement(lt,null));o.a.render(zt,document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},73:function(e,t,a){},93:function(e,t,a){e.exports=a(251)},98:function(e,t,a){},99:function(e,t,a){}},[[93,1,2]]]);
//# sourceMappingURL=main.06b53cb6.chunk.js.map